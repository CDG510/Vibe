<div ng-controller="studioProfileController" >

    <link href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.min.css" rel="stylesheet">
    <nav class="navbar navbar-default navbar-fixed-top" role="navigation">
        <div class="container" id="topLinks">
          <div class="navbar-header">

            <button type="button" class="navbar-toggle animate-show" ng-init="navCollapsed = true" ng-click="navCollapsed = !navCollapsed">
              <span class="sr-only">Toggle navigation</span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand page-scroll logo" href="/#/">Vibe</a>
          </div>
          <div class="collapse navbar-collapse navbar-right navbar-main-collapse" ng-class="!navCollapsed && 'in'">
            <ul class="nav navbar-nav  text-right">
              <li><a class="page-scroll" ng-hide="isLoggedIn()" href="/#/login">Login</a></li>
              <li><a ng-hide="canEdit == true" class="animate-show" href="/#/profile/{{currentUser.username}}" >Profile</a></li>
              <li><a class="page-scroll" href="/#/searchRequest">Search</a></li>
              <li><a ng-if="canEdit == true" href="/#/profile/{{currentUser.username}}/edit" class="animate-if">Edit Profile</a></li>
              <li><a class="animate-show" ng-show="isLoggedIn()" ng-click="logOut()">Logout</a></li>
            </ul>
          </div><!-- /.navbar-collapse -->
        </div>
      </nav>

<div class="container" ng-hide="profile" ng-show="isLoading" style="padding-top: 100px">
    <div class="row">
    <h1 class="text-center">Loading....</h1>

    </div>
</div>

<div class="container jumbotron" id = 'profilePage_container' ng-hide="isLoading" ng-show="profile">
    <div class="row">
        <div class="col-md-12 col-lg-12">
         <div class="col-sm-12 col-md-12 col-lg-12">
            <div class="col-xs-8 col-sm-8 col-md-8 col-lg-8 text-left" id="aboutInfo">

                <h3>{{profile.username }}</h3>
                <h6 ng-hide='profile.phone'>Hit the edit button to fill out your profile!</h6>

                <p class="text-justify" style="word-wrap: break-word" ng-if='profile.fullBio'><strong>Bio: </strong>{{profile.fullBio}} </p>
                <p ng-show="profile.phone"><strong>Phone: </strong> {{profile.phone}}</p>
                <p ng-show="profile.city"><strong>City: </strong>{{profile.city}}</p>

                <p ng-show="profile.mainContact"><strong>Contact: </strong> {{profile.mainContact}}</p>
                <!-- <p><strong>Address: </strong>{{profile.location}}</p> -->
                <p ng-show="profile.specialty"><strong>Specialty: </strong> <span class="tags">{{profile.specialty}}</span></p>
                <p ng-show="profile.websites"><strong ng-if="profile.websites.length > 0">Social: </strong><br>
                    <a ng-repeat="site in profile.websites" href="{{site.url}}" target="_self">{{site.type}}<br /> </a>
                </p>



                <!-- <p class="text-justify"><strong>People Recorded:</strong> PEOPLE OF INTEREST </p>
                 -->

            </div>

            <div class="col-xs-12 col-sm-4 col-md-4 col-lg-4 text-center" id="profilePhoto">
                <figure>
                    <img src="{{profile.profileImage}}" ng-if="profile.profileImage "  alt="img/profile_default.png" class="img-circle img-responsive">
                    <figcaption ng-if="profile.ratings" class="ratings">
                        <p ng-if="profile.profileImage">Ratings
                            <!-- <a href="#">
                                <span class="fa fa-star"></span>
                            </a>
                            <a href="#">
                                <span class="fa fa-star"></span>
                            </a>
                            <a href="#">
                                <span class="fa fa-star"></span>
                            </a>
                            <a href="#">
                                <span class="fa fa-star"></span>
                            </a>
                            <a href="#">
                             <span class="fa fa-star-o"></span>
                         </a> -->
                     </p>
                 </figcaption>
             </figure>

         </div>


     </div>


     <div class="row" >
         <div class="col-xs-12 divider text-center">
             <div class="col-xs-12 col-sm-6 emphasis">
                 <h2><strong ng-if='events'>{{events.length}}</strong><strong ng-hide='events'>0</strong></h2>
                 <p><small>Sessions Booked</small></p>
                 <button class="btn btn-default btn-block" ng-click="openSchedule()" ><span class="fa fa-user"></span> View Schedule </button>
             </div>
            <div class="col-xs-12 col-sm-6 emphasis">
                <h2 ng-if="profile.numberOfRecordings"><strong>{{profile.numberOfRecordings}} </strong></h2>
                <h2 ng-if="!profile.numberOfRecordings"><strong>0</strong></h2>
                <p><small>Recordings made</small></p>
                <!-- THIS MESSAGE BUTTON SHOULD BE A MODAL, if not lead to messenger service-->
                <button class="btn btn-more btn-block" ng-click="email()";
><span class="fa fa-plus-circle"></span>Send Message </button></a>
            </div>

        </div>
    </div>

    <div class="row animate-show" id="calendar" ng-show="calendar" >
        <div class="col-md-12 calendario">

           <div class="col-md-6 text-center">
              <div class="btn-group">

                <button
                class="btn btn-default"
                mwl-date-modifier
                date="viewDate"
                decrement="calendarView">
                Previous
                </button>
                <button
                class="btn btn-default"
                mwl-date-modifier
                date="viewDate"
                set-to-today>
                Today
                </button>
                <button
                class="btn btn-default"
                mwl-date-modifier
                date="viewDate"
                increment="calendarView">
                Next
                </button>
            </div>
        </div>

    <br class="visible-xs visible-sm">

    <div class="col-md-6 text-center">
        <div class="btn-group">
            <label class="btn btn-default" ng-model="calendarView" uib-btn-radio="'year'">Year</label>
            <label class="btn btn-default" ng-model="calendarView" uib-btn-radio="'month'">Month</label>
            <!-- <label class="btn btn-default" ng-model="calendarView" uib-btn-radio="'week'">Week</label>
            <label class="btn btn-default" ng-model="calendarView" uib-btn-radio="'day'">Day</label> -->
        </div>
    </div>


    <mwl-calendar
    events="events"
    view="calendarView"
    view-title="profile.businessName"
    view-date="viewDate"
    on-event-click="eventClicked(calendarEvent)"
    on-event-times-changed="vm.eventTimesChanged(calendarEvent); calendarEvent.startsAt = calendarNewEventStart; calendarEvent.endsAt = calendarNewEventEnd"
    edit-event-html="'<i class=\'glyphicon glyphicon-pencil\'></i>'"
    delete-event-html="'<i class=\'glyphicon glyphicon-remove\'></i>'"
    on-edit-event-click="vm.eventEdited(calendarEvent)"
    on-delete-event-click="deleteEvent(calendarEvent)"
    cell-is-open="isCellOpen"
    day-view-start="06:00"
    day-view-end="22:00"
    day-view-split="30"
    cell-modifier="vm.modifyCell(calendarCell)"></mwl-calendar>



        <div class="bookDiv" ng-show="isLoggedIn()" ng-if="profile.profileType == 'Studio' " >
        <!-- end of calendar row -->
        <h3 ng-hide="canEdit">Request a Session with {{profile.username}} !</h3>
        <h3 ng-show="canEdit">Add Sessions to your schedule</h3>
        <div class="row">
            <form>


            <p class="input-group">
                <div class="col-md-4">
                    <label>Arist Name</label>
                    <input type = "text"  ng-model="session.artist"  class='form-control' placeholder={{currentUser.username}}   />
                    <p ng-if="needNameError" class="text-center">
                      I'm sorry, please provide your name
                    </p>
                </div>
                <div class="col-md-4">
                    <label>Session Start Date</label>
                    <p>
                      <input  ng-model="session.startDate" class="form-control" uib-datepicker-popup  is-open="popup1.opened" datepicker-options="dateOptions"  close-text="Close" alt-input-formats="altInputFormats" date-disabled="disabled(date, mode)" />
                     <span class="input-group-btn">
                       <button type="button" class="btn btn-default" ng-click="open1()"><i class="glyphicon glyphicon-calendar"></i></button>
                     </span>
                    </p>

                  <p ng-if="notDate">
                    Please Pick a Time. Try the calendar button?
                  </p>
                  <p ng-if="notDate" class="text-center">
                    Sorry! Please pick a valid date
                  </p>

                </div>
                <div class="col-md-4">
                    <label>Session End Date</label>
                    <input ng-model="session.endDate" class="form-control"  uib-datepicker-popup  is-open="popup2.opened" datepicker-options="dateOptions"  close-text="Close" date-disabled="disabled(date, mode)" />
                  <span class="input-group-btn">
                    <button  class="btn btn-default" ng-click="open2()"><i class="glyphicon glyphicon-calendar"></i></button>
                  </span>
                  <p ng-if="needEndDateError" class='text-center'>
                    Please pick an end time. Try the calendar button?
                  </p>
                </div>


            </p>
        </div>
<br />
        <div class="row" id="sessionTimes">
            <div class="col-md-4">
                <h5>Start Time</h5>
                <uib-timepicker  ng-change="changed()" hour-step="hstep" min="min" max="max" minute-step="mstep"  ng-model="session.startHour" show-meridian="ismeridian"></uib-timepicker>
                <span class="pull-right" style="color: red;" ng-show="invalid"><h4>Please pick a valid Hour!</h4></span>
            </div>

            <div class='col-md-4'>
              <h5>End Time</h5>
              <uib-timepicker  ng-change="changed()" min="min" max="max" hour-step="hstep" minute-step="mstep" ng-model="session.endHour " format="date | shortTime" show-meridian="ismeridian" ></uib-timepicker>
              <span class="pull-right" style="color: red;" ng-show="invalid"><h4>Please pick a valid Hour!</h4></span>

            </div>

            <div class='col-md-4'>
                <p>Notes and Other info for the studio</p>
                <textarea ng-model="session.info" class='form-control col-md-6'  placeholder="Details & other requests..." ></textarea>
            </div>

        </div>

        <div class='row'>
            <div class="col-md-12">
                <span class="pull-left" style="color: red;" ng-show="invalid"><h4>Please pick a valid time!</h4></span>
                <span class="pull-left" style="color: red;" ng-show="existsFail"><h4>We're sorry, there's already a session booked for that time. Try another timeframe?</h4></span>
                <br />

                <div class="row timeSpace" id="schedule">

            <div class="col-md-12 pull-right">
                   <button type="submit" class="btn btn-default btn-block "  ng-hide="canEdit" id="submitsessionDate" ng-click="requestDates()">Reserve Session</button>
                   <button type='button' class="btn btn-default btn-block" ng-show="canEdit" ng-click="goPay()">Submit Session</button>
            </div>


               </div>
           </div>
        </div>
    </form>

    </div>
  </div>
</div>
</div>
</div>
<!-- <script src="https://www.paypalobjects.com/js/external/apdg.js" type="text/javascript"></script> -->

</div>
